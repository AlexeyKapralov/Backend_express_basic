<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AutoImportSettings">
    <option name="autoReloadType" value="SELECTIVE" />
  </component>
  <component name="ChangeListManager">
    <list default="true" id="26bf12fa-1c19-43fd-bd80-8f598efb16f4" name="Changes" comment="Refactor project structure, add new mappers, update services path&#10;&#10;The commit includes restructuring of the project for better maintenance. Import paths of services in various controllers have been updated. In addition, several new mappers were added to different features like users, blogs, posts, and comments. Cookie checks were introduced in securityDevices routes, and some unnecessary authorization checks were removed from its controllers. Note, further refactoring may be required.">
      <change afterPath="$PROJECT_DIR$/src/features/blogs/domain/blogs.dto.ts" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/src/features/posts/domain/post.dto.ts" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/src/features/rateLimits/domain/rateLimits.dto.ts" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/src/features/securityDevices/domain/devices.dto.ts" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/src/features/securityDevices/models/deviceDb.model.ts" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/src/features/users/domain/user.dto.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/__tests__/e2e/users/userManager.test.ts" beforeDir="false" afterPath="$PROJECT_DIR$/__tests__/e2e/users/userManager.test.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/__tests__/e2e/users/users.api.e2e.ts" beforeDir="false" afterPath="$PROJECT_DIR$/__tests__/e2e/users/users.api.e2e.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/__tests__/unit/auth/refreshToken.unit.ts" beforeDir="false" afterPath="$PROJECT_DIR$/__tests__/unit/auth/refreshToken.unit.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/dist/__tests__/e2e/users/userManager.test.js" beforeDir="false" afterPath="$PROJECT_DIR$/dist/__tests__/e2e/users/userManager.test.js" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/dist/__tests__/e2e/users/users.api.e2e.js" beforeDir="false" afterPath="$PROJECT_DIR$/dist/__tests__/e2e/users/users.api.e2e.js" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/dist/src/common/validation/express-validation.js" beforeDir="false" afterPath="$PROJECT_DIR$/dist/src/common/validation/express-validation.js" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/dist/src/db/db.js" beforeDir="false" afterPath="$PROJECT_DIR$/dist/src/db/db.js" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/app.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/app.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/common/types/devices.model.ts" beforeDir="false" />
      <change beforePath="$PROJECT_DIR$/src/common/types/rateLimit.model.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/features/rateLimits/models/rateLimit.model.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/common/validation/express-validation.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/common/validation/express-validation.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/db/db.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/db/db.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/features/auth/service/login.service.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/features/auth/service/login.service.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/features/blogs/repository/blogsQuery.repository.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/features/blogs/repository/blogsQuery.repository.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/features/comments/repository/comments.repository.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/features/comments/repository/comments.repository.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/features/securityDevices/repository/devices.queryRepository.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/features/securityDevices/repository/devices.queryRepository.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/features/securityDevices/repository/devices.repository.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/features/securityDevices/repository/devices.repository.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/features/users/mappers/userMappers.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/features/users/mappers/userMappers.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/features/users/models/userDb.model.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/features/users/models/userDb.model.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/features/users/repository/users.repository.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/features/users/repository/users.repository.ts" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/features/users/repository/usersQuery.repository.ts" beforeDir="false" afterPath="$PROJECT_DIR$/src/features/users/repository/usersQuery.repository.ts" afterDir="false" />
    </list>
    <option name="SHOW_DIALOG" value="false" />
    <option name="HIGHLIGHT_CONFLICTS" value="true" />
    <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
    <option name="LAST_RESOLUTION" value="IGNORE" />
  </component>
  <component name="FileTemplateManagerImpl">
    <option name="RECENT_TEMPLATES">
      <list>
        <option value="TypeScript File" />
      </list>
    </option>
  </component>
  <component name="Git.Settings">
    <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
  </component>
  <component name="GitHubPullRequestSearchHistory">{
  &quot;lastFilter&quot;: {
    &quot;state&quot;: &quot;OPEN&quot;,
    &quot;assignee&quot;: &quot;AlexeyKapralov&quot;
  }
}</component>
  <component name="GithubPullRequestsUISettings">{
  &quot;selectedUrlAndAccountId&quot;: {
    &quot;url&quot;: &quot;git@github.com:AlexeyKapralov/Backend_express_basic.git&quot;,
    &quot;accountId&quot;: &quot;82fae487-a8c9-4bc6-bae2-860aee87b44c&quot;
  }
}</component>
  <component name="ProblemsViewState">
    <option name="selectedTabId" value="CurrentFile" />
  </component>
  <component name="ProjectColorInfo">{
  &quot;customColor&quot;: &quot;&quot;,
  &quot;associatedIndex&quot;: 3
}</component>
  <component name="ProjectId" id="2gMslTgPGDVAl7NZJQIqO1ifamS" />
  <component name="ProjectViewState">
    <option name="autoscrollFromSource" value="true" />
    <option name="hideEmptyMiddlePackages" value="true" />
    <option name="openDirectoriesWithSingleClick" value="true" />
    <option name="showLibraryContents" value="true" />
  </component>
  <component name="PropertiesComponent"><![CDATA[{
  "keyToString": {
    "Jest.Authentication User.executor": "Run",
    "Jest.Authentication User.should register user (add in db with confirmation code.executor": "Run",
    "Jest.Authentication User.should update refresh token.executor": "Run",
    "Jest.Authentication User.shouldn't update refresh token after expired time.executor": "Run",
    "Jest.Authentication User.shouldn't update refresh token.executor": "Run",
    "Jest.Login User.should login user.executor": "Debug",
    "Jest.Login User.shouldn't update refresh token after expired time.executor": "Run",
    "Jest.auth test.should auth.executor": "Debug",
    "Jest.auth test.should logout.executor": "Run",
    "Jest.comments integration tests.shouldn't delete comment with another userId.executor": "Run",
    "Jest.comments integration tests.shouldn't update comment with another user.executor": "Run",
    "Jest.e2e test for devices.Should delete another devices.executor": "Debug",
    "Jest.e2e test for devices.Should delete device.executor": "Run",
    "Jest.e2e test for devices.Should get a device list of devices.executor": "Run",
    "Jest.e2e test for devices.Should get delete another devices.executor": "Run",
    "Jest.e2e test for devices.Shouldn't delete device with token from another user.executor": "Run",
    "Jest.e2e test for devices.executor": "Run",
    "Jest.integration test delete device.executor": "Run",
    "Jest.integration test delete device.should return forbidden.executor": "Run",
    "Jest.integration test delete device.should return not found.executor": "Run",
    "Jest.integration test delete device.should return unauthorize.executor": "Run",
    "Jest.logout user integration test.executor": "Run",
    "Jest.logout user integration test.should logout and error if try refresh token with old token.executor": "Run",
    "Jest.logout user integration test.should logout user.executor": "Run",
    "Jest.logout user integration test.shouldn't logout user with incorrect token.executor": "Run",
    "Jest.logout user integration test.shouldn't refresh token if token was logout.executor": "Run",
    "Jest.logout user integration test.test.executor": "Debug",
    "Jest.refresh Token e2e test.executor": "Run",
    "Jest.refresh Token integration test.executor": "Run",
    "Jest.refresh Token integration test.should refresh token.executor": "Run",
    "Jest.refresh token test.should refresh token.executor": "Run",
    "Jest.show-delayed-banner.executor": "Run",
    "Jest.user tests.executor": "Run",
    "RunOnceActivity.OpenProjectViewOnStart": "true",
    "RunOnceActivity.ShowReadmeOnStart": "true",
    "WebServerToolWindowFactoryState": "false",
    "git-widget-placeholder": "main",
    "last_opened_file_path": "D:/Projects/IT_Incubator_Projects/Social_network_backend/src/features/rateLimits/models",
    "node.js.detected.package.eslint": "true",
    "node.js.detected.package.tslint": "true",
    "node.js.selected.package.eslint": "(autodetect)",
    "node.js.selected.package.tslint": "(autodetect)",
    "nodejs.jest.jest_package": "D:/Projects/IT_Incubator_Projects/Social_network_backend/node_modules/jest",
    "nodejs_package_manager_path": "npm",
    "npm.dev.executor": "Run",
    "npm.test coverage.executor": "Run",
    "npm.test:e2e.executor": "Run",
    "npm.test:integration.executor": "Run",
    "npm.watch.executor": "Run",
    "settings.editor.selected.configurable": "project.scopes",
    "ts.external.directory.path": "D:\\Projects\\IT_Incubator_Projects\\Social_network_backend\\node_modules\\typescript\\lib",
    "vue.rearranger.settings.migration": "true"
  }
}]]></component>
  <component name="RecentsManager">
    <key name="CopyFile.RECENT_KEYS">
      <recent name="D:\Projects\IT_Incubator_Projects\Social_network_backend\__tests__\utils" />
      <recent name="D:\Projects\IT_Incubator_Projects\Social_network_backend\src\middlewares" />
      <recent name="D:\Projects\IT_Incubator_Projects\Social_network_backend\__tests__\e2e\auth" />
      <recent name="D:\Projects\IT_Incubator_Projects\Social_network_backend\__tests__\integration\auth" />
      <recent name="D:\Projects\IT_Incubator_Projects\Social_network_backend" />
    </key>
    <key name="MoveFile.RECENT_KEYS">
      <recent name="D:\Projects\IT_Incubator_Projects\Social_network_backend\src\features\rateLimits\models" />
      <recent name="D:\Projects\IT_Incubator_Projects\Social_network_backend\src\features\users\service" />
      <recent name="D:\Projects\IT_Incubator_Projects\Social_network_backend\src\features\posts\service" />
      <recent name="D:\Projects\IT_Incubator_Projects\Social_network_backend\src\features\securityDevices\service" />
      <recent name="D:\Projects\IT_Incubator_Projects\Social_network_backend\src\features\comments\service" />
    </key>
  </component>
  <component name="RunManager" selected="Jest.user tests">
    <configuration name="Login User.shouldn't update refresh token after expired time" type="JavaScriptTestRunnerJest" temporary="true" nameIsGenerated="true">
      <node-interpreter value="project" />
      <jest-package value="$PROJECT_DIR$/node_modules/jest" />
      <working-dir value="$PROJECT_DIR$" />
      <envs />
      <scope-kind value="TEST" />
      <test-file value="$PROJECT_DIR$/__tests__/integration/auth/loginUser.integration.ts" />
      <test-names>
        <test-name value="Login User" />
        <test-name value="shouldn't update refresh token after expired time" />
      </test-names>
      <method v="2" />
    </configuration>
    <configuration name="user tests" type="JavaScriptTestRunnerJest" temporary="true" nameIsGenerated="true">
      <node-interpreter value="project" />
      <jest-package value="$PROJECT_DIR$/node_modules/jest" />
      <working-dir value="$PROJECT_DIR$" />
      <envs />
      <scope-kind value="SUITE" />
      <test-file value="$PROJECT_DIR$/__tests__/e2e/users/users.api.e2e.ts" />
      <test-names>
        <test-name value="user tests" />
      </test-names>
      <method v="2" />
    </configuration>
    <configuration name="dev" type="js.build_tools.npm" temporary="true" nameIsGenerated="true">
      <package-json value="$PROJECT_DIR$/package.json" />
      <command value="run" />
      <scripts>
        <script value="dev" />
      </scripts>
      <node-interpreter value="project" />
      <envs />
      <method v="2" />
    </configuration>
    <configuration name="test:e2e" type="js.build_tools.npm" temporary="true" nameIsGenerated="true">
      <package-json value="$PROJECT_DIR$/package.json" />
      <command value="run" />
      <scripts>
        <script value="test:e2e" />
      </scripts>
      <node-interpreter value="project" />
      <envs />
      <method v="2" />
    </configuration>
    <configuration name="test:integration" type="js.build_tools.npm" temporary="true" nameIsGenerated="true">
      <package-json value="$PROJECT_DIR$/package.json" />
      <command value="run" />
      <scripts>
        <script value="test:integration" />
      </scripts>
      <node-interpreter value="project" />
      <envs />
      <method v="2" />
    </configuration>
    <recent_temporary>
      <list>
        <item itemvalue="Jest.user tests" />
        <item itemvalue="Jest.Login User.shouldn't update refresh token after expired time" />
        <item itemvalue="npm.test:e2e" />
        <item itemvalue="npm.test:integration" />
        <item itemvalue="npm.dev" />
      </list>
    </recent_temporary>
  </component>
  <component name="SharedIndexes">
    <attachedChunks>
      <set>
        <option value="bundled-js-predefined-1d06a55b98c1-0b3e54e931b4-JavaScript-WS-241.17011.90" />
      </set>
    </attachedChunks>
  </component>
  <component name="SpellCheckerSettings" RuntimeDictionaries="0" Folders="0" CustomDictionaries="0" DefaultDictionary="application-level" UseSingleDictionary="true" transferred="true" />
  <component name="TaskManager">
    <task active="true" id="Default" summary="Default task">
      <changelist id="26bf12fa-1c19-43fd-bd80-8f598efb16f4" name="Changes" comment="" />
      <created>1715518933593</created>
      <option name="number" value="Default" />
      <option name="presentableId" value="Default" />
      <updated>1715518933593</updated>
      <workItem from="1715518935548" duration="3791000" />
      <workItem from="1715629308315" duration="11000" />
      <workItem from="1715629396450" duration="1513000" />
      <workItem from="1715663040945" duration="23984000" />
      <workItem from="1716014567588" duration="35349000" />
      <workItem from="1716268615446" duration="21269000" />
      <workItem from="1716404971231" duration="1088000" />
      <workItem from="1716440091789" duration="1068000" />
      <workItem from="1716441374252" duration="1198000" />
      <workItem from="1716442603849" duration="14000" />
      <workItem from="1716442630751" duration="27993000" />
      <workItem from="1716614930749" duration="123000" />
      <workItem from="1716615062038" duration="60853000" />
      <workItem from="1716786323116" duration="19011000" />
      <workItem from="1716900880629" duration="3076000" />
      <workItem from="1716995386748" duration="7353000" />
      <workItem from="1717046831530" duration="21715000" />
    </task>
    <task id="LOCAL-00001" summary="small fixes">
      <option name="closed" value="true" />
      <created>1715522020569</created>
      <option name="number" value="00001" />
      <option name="presentableId" value="LOCAL-00001" />
      <option name="project" value="LOCAL" />
      <updated>1715522020569</updated>
    </task>
    <task id="LOCAL-00002" summary="add logout and refresh token endpoints and tests for these endpoints, also add fake timers for tests">
      <option name="closed" value="true" />
      <created>1716116099381</created>
      <option name="number" value="00002" />
      <option name="presentableId" value="LOCAL-00002" />
      <option name="project" value="LOCAL" />
      <updated>1716116099381</updated>
    </task>
    <task id="LOCAL-00003" summary="add custom rate limit">
      <option name="closed" value="true" />
      <created>1716317761597</created>
      <option name="number" value="00003" />
      <option name="presentableId" value="LOCAL-00003" />
      <option name="project" value="LOCAL" />
      <updated>1716317761597</updated>
    </task>
    <task id="LOCAL-00004" summary="Update login service and refactor tests&#10;&#10;The code has been updated to enhance the login service that now receives additional parameters. Related tests have been refactored for this change. Files related to handling blocklist functionality have been removed. The auth test file has been renamed, and a new test file for refresh token has been added. The integration test for logout has been updated. The mechanism to handle devices for security has been introduced.">
      <option name="closed" value="true" />
      <created>1716754647915</created>
      <option name="number" value="00004" />
      <option name="presentableId" value="LOCAL-00004" />
      <option name="project" value="LOCAL" />
      <updated>1716754647915</updated>
    </task>
    <task id="LOCAL-00005" summary="little refactor refresh token test and jwt expire time use values from settings">
      <option name="closed" value="true" />
      <created>1716902145742</created>
      <option name="number" value="00005" />
      <option name="presentableId" value="LOCAL-00005" />
      <option name="project" value="LOCAL" />
      <updated>1716902145742</updated>
    </task>
    <task id="LOCAL-00006" summary="Refactor project structure, add new mappers, update services path&#10;&#10;The commit includes restructuring of the project for better maintenance. Import paths of services in various controllers have been updated. In addition, several new mappers were added to different features like users, blogs, posts, and comments. Cookie checks were introduced in securityDevices routes, and some unnecessary authorization checks were removed from its controllers. Note, further refactoring may be required.">
      <option name="closed" value="true" />
      <created>1717093836286</created>
      <option name="number" value="00006" />
      <option name="presentableId" value="LOCAL-00006" />
      <option name="project" value="LOCAL" />
      <updated>1717093836287</updated>
    </task>
    <option name="localTasksCounter" value="7" />
    <servers />
  </component>
  <component name="TypeScriptGeneratedFilesManager">
    <option name="version" value="3" />
  </component>
  <component name="VcsManagerConfiguration">
    <MESSAGE value="small fixes" />
    <MESSAGE value="add logout and refresh token endpoints and tests for these endpoints, also add fake timers for tests" />
    <MESSAGE value="add custom rate limit" />
    <MESSAGE value="Updated authentication functionality and test refactoring&#10;&#10;The commit introduces changes including updating the loginController to include user agent and IP, renaming and modifying test files for better handling and assertions. It also introduces refreshToken integration tests and updates a comment in authManager.test.ts. A significant portion of the changes involves updating test cases to adapt to the new token structure, ensuring accurate verification of access and refresh tokens." />
    <MESSAGE value="Update login service and refactor tests&#10;&#10;The code has been updated to enhance the login service that now receives additional parameters. Related tests have been refactored for this change. Files related to handling blocklist functionality have been removed. The auth test file has been renamed, and a new test file for refresh token has been added. The integration test for logout has been updated. The mechanism to handle devices for security has been introduced." />
    <MESSAGE value="some refactor" />
    <MESSAGE value="little refactor refresh token test and jwt expire time use values from settings" />
    <MESSAGE value="Refactor project structure, add new mappers, update services path&#10;&#10;The commit includes restructuring of the project for better maintenance. Import paths of services in various controllers have been updated. In addition, several new mappers were added to different features like users, blogs, posts, and comments. Cookie checks were introduced in securityDevices routes, and some unnecessary authorization checks were removed from its controllers. Note, further refactoring may be required." />
    <option name="LAST_COMMIT_MESSAGE" value="Refactor project structure, add new mappers, update services path&#10;&#10;The commit includes restructuring of the project for better maintenance. Import paths of services in various controllers have been updated. In addition, several new mappers were added to different features like users, blogs, posts, and comments. Cookie checks were introduced in securityDevices routes, and some unnecessary authorization checks were removed from its controllers. Note, further refactoring may be required." />
  </component>
</project>